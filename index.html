<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>Neon Typing Fighter</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <!-- Main Menu -->
        <div id="main-menu" class="menu-screen active">
            <!-- Top Corner Buttons -->
            <div class="corner-buttons top-left">
                <button class="icon-button" id="settings-btn" title="Settings">‚öôÔ∏è</button>
            </div>
            <div class="corner-buttons top-right">
                <button class="icon-button" id="themes-btn" title="Themes">üé®</button>
                <button class="icon-button" id="achievements-btn" title="Achievements">üèÜ</button>
            </div>
            
            <div class="neon-title">
                <h1>NEON TYPING FIGHTER</h1>
                <div class="subtitle">CYBERPUNK TYPING DUEL</div>
            </div>
            
            <div class="main-menu-container">
                <!-- Center: Game Modes -->
                <div class="main-menu-center">
                    <div class="menu-buttons">
                        <button class="neon-button" id="solo-mode-btn">SOLO MODE</button>
                        <button class="neon-button" id="coop-mode-btn">CO-OP MODE</button>
                        <button class="neon-button" id="timed-mode-btn">TIMED MODE</button>
                        <button class="neon-button" id="endless-mode-btn">ENDLESS MODE</button>
                        <button class="neon-button" id="multiplayer-mode-btn">MULTIPLAYER</button>
                    </div>
                    
                    <!-- Audio Controls Below Game Modes -->
                    <div class="audio-controls">
                        <button class="audio-toggle-btn" id="sound-toggle" title="Toggle Sound Effects">üîä SFX</button>
                        <button class="audio-toggle-btn" id="music-toggle" title="Toggle Background Music">üéµ MUSIC</button>
                    </div>
                </div>
                
                <!-- Right: Leaderboard -->
                <div class="main-menu-right">
                    <div class="main-menu-leaderboard" id="main-menu-leaderboard">
                        <div class="leaderboard-header">
                            <h3 class="neon-text">üèÜ TOP 10 üèÜ</h3>
                            <div class="leaderboard-tabs">
                                <button class="leaderboard-tab active" data-tab="timed">TIMED</button>
                                <button class="leaderboard-tab" data-tab="elo">ELO</button>
                                <button class="leaderboard-tab" data-tab="endless">ENDLESS</button>
                            </div>
                        </div>
                        <div class="leaderboard-list" id="main-menu-leaderboard-list">
                            <div class="loading-message">Loading...</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bottom: User Panel -->
            <div class="user-panel" id="user-panel">
                <div class="user-info hidden" id="user-info">
                    <span class="user-name" id="user-name-display"></span>
                    <span class="verification-status hidden" id="verification-status">
                        <span class="unverified-badge" id="unverified-badge">‚ö†Ô∏è Email Not Verified</span>
                        <button class="resend-verification-btn" id="resend-verification-btn">Resend Email</button>
                    </span>
                    <button class="logout-btn" id="logout-btn">LOGOUT</button>
                </div>
                <div class="auth-buttons" id="auth-buttons">
                    <button class="neon-button small" id="login-btn">LOGIN</button>
                    <button class="neon-button small secondary" id="register-btn">REGISTER</button>
                </div>
            </div>
        </div>

        <!-- Login Modal -->
        <div id="login-modal" class="modal hidden">
            <div class="modal-content">
                <h2 class="neon-text">LOGIN</h2>
                <form id="login-form">
                    <div class="form-group">
                        <input type="text" id="login-username" placeholder="Username or Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="login-password" placeholder="Password" required>
                    </div>
                    <div class="error-message hidden" id="login-error"></div>
                    <div class="form-buttons">
                        <button type="submit" class="neon-button">LOGIN</button>
                        <button type="button" class="neon-button secondary" id="login-cancel">CANCEL</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Register Modal -->
        <div id="register-modal" class="modal hidden">
            <div class="modal-content">
                <h2 class="neon-text">REGISTER</h2>
                <form id="register-form">
                    <div class="form-group">
                        <input type="text" id="register-username" placeholder="Username (3-20 characters)" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="register-email" placeholder="Email" required>
                    </div>
                    <div class="form-group">
                        <input type="password" id="register-password" placeholder="Password (min 6 characters)" required>
                    </div>
                    <div class="error-message hidden" id="register-error"></div>
                    <div class="form-buttons">
                        <button type="submit" class="neon-button">CREATE ACCOUNT</button>
                        <button type="button" class="neon-button secondary" id="register-cancel">CANCEL</button>
                    </div>
                </form>
            </div>
        </div>
        <!-- Timed Mode Screen -->
        <div id="timed-mode-screen" class="hidden">
            <!-- Timed Mode HUD -->
            <div class="timed-hud">
                <div class="timed-stat-box">
                    <div class="timed-stat-label">TIME</div>
                    <div class="timed-stat-value" id="timed-timer">15.00</div>
                </div>
                <div class="timed-stat-box">
                    <div class="timed-stat-label">SCORE</div>
                    <div class="timed-stat-value" id="timed-score">0</div>
                </div>
                <div class="timed-stat-box">
                    <div class="timed-stat-label">MULTIPLIER</div>
                    <div class="timed-stat-value" id="timed-multiplier">x1.0</div>
                </div>
            </div>

            <!-- Center Typing Area -->
            <div class="timed-center-area">
                <div class="word-display-container">
                    <div class="current-word" id="timed-current-word"></div>
                    <div class="next-word-preview" id="timed-next-word-preview">NEXT: </div>
                </div>

                <div class="typing-area">
                    <input type="text" id="timed-typing-input" class="neon-input" placeholder="Type the word..." autocomplete="off" spellcheck="false">
                    <div class="typing-feedback" id="timed-typing-feedback"></div>
                </div>
            </div>

            <!-- Particle Effects -->
            <div id="timed-particles-container"></div>

            <!-- Results Overlay -->
            <div id="timed-results-overlay" class="hidden">
                <div class="timed-results-content">
                    <h2 class="neon-text">TIME'S UP!</h2>
                    <div class="timed-score-display">
                        <div class="score-label">FINAL SCORE</div>
                        <div class="score-value" id="timed-final-score">0</div>
                    </div>
                    <div class="timed-best-score">
                        <div class="best-label">YOUR BEST</div>
                        <div class="best-value" id="timed-best-score">0</div>
                    </div>
                    <div class="global-leaderboard" id="global-leaderboard">
                        <div class="leaderboard-title">üèÜ GLOBAL TOP 10 üèÜ</div>
                        <div class="leaderboard-list" id="leaderboard-list"></div>
                    </div>
                    <div class="timed-stats" id="timed-stats"></div>
                    <div class="timed-results-buttons">
                        <button class="neon-button" id="replay-timed-btn">REPLAY</button>
                        <button class="neon-button secondary" id="timed-menu-btn">MAIN MENU</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Screen -->
        <div id="game-screen" class="hidden">
            <!-- Player 1 (Left Side) -->
            <div class="player-area player-left">
                <div class="player-info">
                    <div class="player-name" id="player1-name">PLAYER 1</div>
                    <div class="health-container">
                        <div class="health-bar-bg">
                            <div class="health-bar neon-cyan" id="player1-health" style="width: 100%"></div>
                        </div>
                        <div class="health-text" id="player1-health-text">100</div>
                    </div>
                </div>
                <div class="character-display" id="player1-character">
                    <div class="character-sprite"></div>
                </div>
            </div>

            <!-- Center Area -->
            <div class="center-area">
                <!-- Word Display -->
                <div class="word-display-container">
                    <div class="current-word" id="current-word"></div>
                    <div class="next-word-preview" id="next-word-preview">NEXT: </div>
                    <div class="word-queue" id="word-queue"></div>
                </div>

                <!-- Typing Input -->
                <div class="typing-area">
                    <input type="text" id="typing-input" class="neon-input" placeholder="Type the word..." autocomplete="off" spellcheck="false">
                    <div class="typing-feedback" id="typing-feedback"></div>
                </div>

                <!-- Combat Log -->
                <div class="combat-log" id="combat-log"></div>
            </div>

            <!-- Player 2 (Right Side) -->
            <div class="player-area player-right">
                <div class="player-info">
                    <div class="player-name" id="player2-name">OPPONENT</div>
                    <div class="health-container">
                        <div class="health-bar-bg">
                            <div class="health-bar neon-magenta" id="player2-health" style="width: 100%"></div>
                        </div>
                        <div class="health-text" id="player2-health-text">100</div>
                    </div>
                </div>
                <div class="character-display" id="player2-character">
                    <div class="character-sprite"></div>
                </div>
            </div>

            <!-- Particle Effects Container -->
            <div id="particles-container"></div>

            <!-- Game Over Overlay -->
            <div id="game-over-overlay" class="hidden">
                <div class="game-over-content">
                    <h2 id="game-over-title">VICTORY</h2>
                    <div class="game-over-stats" id="game-over-stats"></div>
                    <button class="neon-button" id="play-again-btn" style="display:none;">PLAY AGAIN</button>
                    <button class="neon-button" id="return-menu-btn">RETURN TO MENU</button>
                </div>
            </div>
        </div>
        
        <!-- Match Start Countdown (Outside game-screen so it can show while lobby is visible) -->
        <div id="match-countdown-overlay" class="hidden">
            <div class="countdown-content">
                <div class="opponent-found-text">OPPONENT FOUND!</div>
                <div class="opponent-name-display" id="opponent-name-display"></div>
                <div class="countdown-number" id="countdown-number">3</div>
                <div class="countdown-text">GET READY!</div>
            </div>
        </div>

        <!-- Multiplayer Lobby -->
        <div id="multiplayer-lobby" class="menu-screen hidden">
            <h2 class="neon-text">MULTIPLAYER LOBBY</h2>
            <div class="lobby-content">
                <div class="connection-status" id="connection-status">Connecting...</div>
                <div class="lobby-stats hidden" id="lobby-stats">
                    <div class="stat-item">
                        <span class="stat-label">Players Online:</span>
                        <span class="stat-value" id="players-online">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">In Queue:</span>
                        <span class="stat-value" id="queue-position">0</span>
                    </div>
                </div>
                <button class="neon-button" id="find-match-btn">FIND MATCH</button>
                <button class="neon-button secondary" id="cancel-match-btn" style="display:none;">CANCEL</button>
                <button class="neon-button secondary" id="back-to-menu-btn">BACK</button>
                <div class="waiting-message hidden" id="waiting-message">
                    <div class="searching-animation">
                        <div class="searching-dots">
                            <span></span><span></span><span></span>
                        </div>
                        <div class="searching-text">Searching for opponent...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Theme Selector -->
        <div id="theme-selector" class="menu-screen hidden">
            <h2 class="neon-text">SELECT YOUR THEME</h2>
            <div class="theme-selector-content">
                <div class="theme-grid" id="theme-grid">
                    <!-- Theme cards will be inserted here -->
                </div>
                <button class="neon-button secondary" id="back-from-themes-btn">BACK</button>
            </div>
        </div>

        <!-- Settings Menu -->
        <div id="settings-menu" class="menu-screen hidden">
            <h2 class="neon-text">SETTINGS</h2>
            <div class="settings-content">
                <div class="settings-section">
                    <h3 class="setting-category">Audio</h3>
                    <div class="setting-item">
                        <label for="sound-volume">Sound Effects Volume</label>
                        <input type="range" id="sound-volume" min="0" max="100" value="50">
                        <span class="volume-value" id="sound-volume-value">50%</span>
                    </div>
                    <div class="setting-item">
                        <label for="music-volume">Music Volume</label>
                        <input type="range" id="music-volume" min="0" max="100" value="30">
                        <span class="volume-value" id="music-volume-value">30%</span>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="mute-sounds">
                            Mute All Sounds
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="setting-category">Gameplay</h3>
                    <div class="setting-item">
                        <label for="difficulty">AI Difficulty</label>
                        <select id="difficulty" class="neon-select">
                            <option value="easy">Easy</option>
                            <option value="medium" selected>Medium</option>
                            <option value="hard">Hard</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label for="word-bank-select">Word Bank</label>
                        <select id="word-bank-select" class="neon-select">
                            <option value="cyberpunk">Cyberpunk</option>
                            <option value="names">Names</option>
                            <option value="all">All Words</option>
                        </select>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="show-fps">
                            Show FPS Counter
                        </label>
                    </div>
                </div>

                <div class="settings-section">
                    <h3 class="setting-category">Display</h3>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="reduce-particles">
                            Reduce Particle Effects
                        </label>
                    </div>
                    <div class="setting-item">
                        <label>
                            <input type="checkbox" id="screen-shake">
                            Enable Screen Shake
                        </label>
                    </div>
                </div>

                <button class="neon-button secondary" id="back-from-settings-btn">BACK</button>
            </div>
        </div>

        <!-- Achievements Screen -->
        <div id="achievements-screen" class="menu-screen hidden">
            <h2 class="neon-text">ACHIEVEMENTS</h2>
            <div class="achievements-content">
                <div class="achievements-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="achievements-unlocked">0</div>
                        <div class="stat-label">Unlocked</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="achievements-total">10</div>
                        <div class="stat-label">Total</div>
                    </div>
                </div>
                <div class="achievements-grid" id="achievements-grid">
                    <!-- Achievement cards will be inserted here -->
                </div>
                <button class="neon-button secondary" id="back-from-achievements-btn">BACK</button>
            </div>
        </div>

        <!-- Endless Mode Screen -->
        <div id="endless-mode-screen" class="menu-screen hidden">
            <div class="endless-container">
                <h2 class="neon-text">ENDLESS MODE</h2>
                <p class="endless-description">Survive as many waves as you can! Each wave increases in difficulty.</p>
                
                <!-- Wave Info -->
                <div class="endless-wave-header">
                    <div class="wave-stat">
                        <span class="stat-label">WAVE</span>
                        <span class="stat-value" id="endless-wave-number">1</span>
                    </div>
                    <div class="wave-stat">
                        <span class="stat-label">WORDS</span>
                        <span class="stat-value" id="endless-words-progress">0 / 5</span>
                    </div>
                    <div class="wave-stat">
                        <span class="stat-label">TIME</span>
                        <span class="stat-value" id="endless-timer">30s</span>
                    </div>
                </div>
                
                <div class="endless-wave-info" id="endless-wave-info">
                    Wave 1 - Complete 5 words in 30s
                </div>
                
                <!-- Game Area -->
                <div class="endless-game-area">
                    <div class="word-display">
                        <div class="current-word" id="endless-current-word">cyber</div>
                        <div class="next-word-preview" id="endless-next-word-preview">
                            <span class="next-word-label">NEXT:</span>
                            <span class="next-word" id="endless-next-word">matrix</span>
                        </div>
                    </div>
                    
                    <div class="typing-area">
                        <input type="text" 
                               class="neon-input" 
                               id="endless-typing-input" 
                               placeholder="Type the word..." 
                               autocomplete="off" 
                               spellcheck="false"
                               disabled>
                        <div class="typing-feedback" id="endless-typing-feedback"></div>
                    </div>
                </div>
                
                <!-- Leaderboard -->
                <div class="endless-leaderboard">
                    <h3 class="neon-text">TOP SURVIVORS</h3>
                    <div id="endless-leaderboard-list" class="leaderboard-list">
                        <!-- Leaderboard entries will be inserted here -->
                    </div>
                </div>
                
                <!-- Controls -->
                <div class="endless-controls">
                    <button class="neon-button" id="endless-start-btn">START GAME</button>
                    <button class="neon-button secondary" id="endless-back-btn">BACK TO MENU</button>
                </div>
                
                <!-- Game Over Screen -->
                <div id="endless-game-over" class="game-over-screen hidden">
                    <h3 id="endless-game-over-title">GAME OVER</h3>
                    <div class="game-over-stats">
                        <div class="stat-row">
                            <span class="stat-label">Final Wave:</span>
                            <span class="stat-value" id="endless-final-wave">1</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Words Typed:</span>
                            <span class="stat-value" id="endless-total-words">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Critical Hits:</span>
                            <span class="stat-value" id="endless-total-criticals">0</span>
                        </div>
                        <div class="stat-row">
                            <span class="stat-label">Survival Time:</span>
                            <span class="stat-value" id="endless-survival-time">0:00</span>
                        </div>
                    </div>
                    <div class="game-over-buttons">
                        <button class="neon-button" id="endless-play-again-btn">PLAY AGAIN</button>
                        <button class="neon-button secondary" id="endless-menu-btn">MAIN MENU</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Co-op Mode Screen -->
        <div id="coop-mode-screen" class="menu-screen hidden">
            <!-- Matchmaking Menu -->
            <div id="coop-matchmaking-menu" class="matchmaking-menu">
                <h2 class="neon-text">CO-OP MODE</h2>
                <div class="coop-subtitle">TEAM VS BOSS</div>
                <div class="matchmaking-status" id="coop-matchmaking-status">
                    <div class="status-icon">üîç</div>
                    <div class="status-text">Ready to find a teammate!</div>
                </div>
                <div class="matchmaking-buttons">
                    <button class="neon-button" id="coop-find-match-btn">FIND TEAMMATE</button>
                    <button class="neon-button secondary hidden" id="coop-cancel-match-btn">CANCEL</button>
                    <button class="neon-button secondary" id="coop-back-btn">BACK TO MENU</button>
                </div>
            </div>

            <!-- Countdown Overlay -->
            <div id="coop-countdown-overlay" class="countdown-overlay hidden">
                <div class="countdown-content">
                    <div id="coop-teammate-found-text" class="opponent-found-text">TEAMMATE FOUND!</div>
                    <div id="coop-teammate-name-display" class="opponent-name-display"></div>
                    <div id="coop-countdown-number" class="countdown-number">3</div>
                </div>
            </div>
            
            <div class="coop-game-area hidden" id="coop-game-area">
                <!-- Boss Section -->
                <div class="boss-section">
                    <div class="boss-info">
                        <h3 class="boss-name" id="coop-boss-name">MEGA BOSS</h3>
                        <div class="boss-status" id="coop-boss-status">WAITING</div>
                    </div>
                    <div class="health-bar-container boss-health-container">
                        <div class="health-bar boss-health-bar" id="coop-boss-health"></div>
                        <div class="health-text" id="coop-boss-health-text">300 / 300</div>
                    </div>
                </div>

                <!-- Team Section -->
                <div class="team-section">
                    <div class="team-info">
                        <h3 class="neon-text">TEAM HEALTH</h3>
                    </div>
                    <div class="health-bar-container team-health-container">
                        <div class="health-bar team-health-bar" id="coop-team-health"></div>
                        <div class="health-text" id="coop-team-health-text">200 / 200</div>
                    </div>
                </div>

                <!-- Shared Typing Area -->
                <div class="coop-shared-typing">
                    <div class="word-display">
                        <div class="current-word" id="coop-current-word">cyber</div>
                    </div>
                    <div class="turn-indicator" id="coop-turn-indicator">
                        <span id="coop-turn-text">Player 1's Turn</span>
                    </div>
                    <div class="typing-area">
                        <input type="text" 
                               class="neon-input" 
                               id="coop-shared-input" 
                               placeholder="Type here..."
                               autocomplete="off"
                               spellcheck="false"
                               disabled>
                        <div class="typing-feedback" id="coop-typing-feedback"></div>
                    </div>
                    <div class="players-info">
                        <div class="player-info">
                            <span class="player-label">PLAYER 1</span>
                            <span id="coop-player1-name">Player 1</span>
                        </div>
                        <div class="player-info">
                            <span class="player-label">PLAYER 2</span>
                            <span id="coop-player2-name">Player 2</span>
                        </div>
                    </div>
                </div>

                <!-- Game Over Stats -->
                <div class="coop-game-over hidden" id="coop-game-over">
                    <h3 id="coop-game-over-title">VICTORY!</h3>
                    <div id="coop-game-over-stats"></div>
                    <div class="coop-game-over-buttons">
                        <button class="neon-button" id="coop-play-again-btn">PLAY AGAIN</button>
                        <button class="neon-button secondary" id="coop-menu-btn">MAIN MENU</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Achievement Unlock Toast -->
    <div id="achievement-toast" class="achievement-toast hidden">
        <div class="achievement-toast-content">
            <div class="achievement-toast-icon"></div>
            <div class="achievement-toast-text">
                <div class="achievement-toast-title">Achievement Unlocked!</div>
                <div class="achievement-toast-name"></div>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="themes.js"></script>
    <script src="words.js"></script>
    <script src="particle.js"></script>
    <script src="sounds.js"></script>
    <script src="auth.js"></script>
    <script src="highscore-api.js"></script>
    <script src="ai.js"></script>
    <script src="websocket.js"></script>
    <script src="game.js"></script>
    <script src="timedmode.js"></script>
    <script src="endlessmode.js"></script>
    <script src="coopmode.js"></script>
    <script src="main.js"></script>
</body>
</html>
